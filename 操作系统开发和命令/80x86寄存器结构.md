#### 80x86寄存器结构

80x86寄存器 CPU共有一般分为5类：

1. 数据寄存器
2. 段寄存器
3. 控制寄存器
4. 指针寄存器
5. 段基址寄存器

具体分类如下：

```register
80x86 registers
|——通用寄存器
|	|——数据寄存器
|	|	|——EAX
|	|	|	|——AX -> |AH|AL|
|	|	|——EBX
|	|	|	|——BX -> |BH|BL|
|	|	|——ECX
|	|	|	|——CX -> |CH|CL|
|	|	|——EDX
|	|		|——DX -> |DH|DL|
|	|
|	|——指针寄存器
|	|	|——堆栈指针寄存器
|	|	|	|——ESP
|	|	|	|	|——SP
|	|	|——基址指针寄存器
|	|		|——EBP
|	|			|__BP
|	|
|	|——变址寄存器
|		|——源变址寄存器
|		|	|——ESI
|		|	|	|——SI
|		|——目的变址寄存器
|			|——EDI
|				|——DI
|
|——控制寄存器
|	|——指令指针寄存器
|	|	|——EIP
|	|	|	|——IP
|	|——标志寄存器
|	|	|——EFLAGS
|	|	|	|——FLAGS
|	|——控制寄存器0
|	|	|——CR0
|	|——控制寄存器1
|	|	|——CR1
|	|——控制寄存器2
|	|	|——CR2
|	|——控制寄存器3
|		|——CR3
|
|——段寄存器
|	|——代码段寄存器
|	|	|——CS
|	|——数据段寄存器
|	|	|——DS
|	|——堆栈段寄存器
|	|	|——SS
|	|——附加段寄存器
|		|——ES
|		|——FS
|		|——GS
|
|——段基址寄存器
|	|——全局描述符表寄存器
|	|	|——GDTR
|	|——中断描述符表寄存器
|	|	|——IDTR
|	|——局部描述符表寄存器
|	|	|——LDTR
|	|——任务状态寄存器
|		|——TR
```

##### 5.3.1 段寄存器使用约定

| 访问存储区类型     | 缺省段寄存器 | 可指定段寄存器 | 段内偏移地址来源       |
| ------------------ | ------------ | -------------- | ---------------------- |
| 取指令码           | CS           | 无             | IP                     |
| 堆栈操作           | SS           | 无             | SP                     |
| BP用作基地址寄存器 | SS           | CS DS ES       | 依寻址方式寻找有效地址 |
| 串操作源地址       | DS           | CS DS ES       | SI                     |
| 串操作目的地址     | ES           | 无             | DI                     |
| 一般数据存取       | DS           | CS DS ES       | 依寻址方式寻找有效地址 |

##### 5.3.2 EFLAGS标志寄存器

```register
31                            18 17 16 15 14 13 12 11 10 9  8  7  6  5  4  3  2  1  0
+-------------------------------+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                               |V |R |0 |N | IO  |O |D |I |T |S |Z |0 |A |0 |P |1 |C |
|                               |M |F |  |T | PL  |F |F |F |F |F |F |  |F |  |F |  |F |
+-------------------------------+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
```

1. CF(Carry Flag)：进位标志位
2. PF(Parity Flag)：奇偶标志位
3. AF(Assistant Flag)：辅助进位标志位
4. ZF(Zero Flag)：零标志位
5. SF(Signal Flag)：符号标志位
6. IF(Interrupt Flag)：中断允许标志位，由`CLI`，`STI`两条指令来控制；设置IF位使CPU可识别外部(可屏蔽)中断请求，复位IF位则禁止中断；IF位对不可屏蔽外部中断和故障中断的识别没有任何作用
7. DF(Direction Flag)：方向标志位，由`CLD`，`STD`两条指令控制；复位DF标志位，字符串操作指令中`SI`，`DI`值自增；设置DF位字符串操作指令中`SI`，`DI`值自减
8. OF(Overflow Flag)：溢出标志位
9. IOPL(I/O Privilege Level)：I/O特权级字段，宽度2位
10. NT(Nested Task)：控制中断返回指令`IRET`

**使用 `pushf` 和 `popf` 指令来获得和修改 eflags 寄存器**